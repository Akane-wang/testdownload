System.register(["./common-legacy-CjRD6M7d.js","./index-legacy-CGxx4Vbo.js","./index-legacy-CHWSOBtp.js"],(function(e,t){"use strict";var a,i,n,l,o,s,d,r,u,c,v,f,h,m,g,p,w,b,y,x,L,k,_,S,B,D,C,T,E,P,W,I,j,R,U,N;return{setters:[e=>{a=e._,i=e.Q,n=e.s,l=e.S,o=e.X,s=e.i,d=e.C,r=e.T,u=e.R},e=>{c=e.N,v=e.O,f=e.P,h=e.Q,m=e.R,g=e.M},e=>{p=e.a,w=e.o,b=e.r,y=e.e,x=e.g,L=e.h,k=e.j,_=e.c,S=e.t,B=e.f,D=e.i,C=e.k,T=e.p,E=e.F,P=e.ar,W=e.w,I=e.M,j=e.as,R=e.al,U=e.K,N=e.at}],execute:function(){var t=document.createElement("style");t.textContent="p[data-v-886e0c5f]{margin:0}.title[data-v-886e0c5f]{margin:2vw 0;text-align:center;font-weight:700}.formTel[data-v-886e0c5f]{padding:0 2vw}.el-form-item[data-v-886e0c5f]{margin-bottom:1.6vw;align-items:center}[data-v-886e0c5f] .el-form-item__label{line-height:130%!important;height:auto!important;justify-content:flex-start!important;width:40vw}.skip[data-v-886e0c5f]{width:45vw;margin-top:2vw;padding-top:1vw;padding-bottom:1vw;padding-left:1vw;border:.266667vw solid #dbdbdb;border-radius:1.333333vw;min-width:22.666667vw;background:#fff}.Piping[data-v-886e0c5f]{margin-top:2vw;background:#fff;border-radius:1.333333vw}p[data-v-1b1c3fa6]{margin:0}[data-v-1b1c3fa6] .title{margin:2vw 0;text-align:center;font-weight:700}.formTel[data-v-1b1c3fa6]{padding:0 2vw}.el-form-item[data-v-1b1c3fa6]{margin-bottom:1.6vw;align-items:center}[data-v-1b1c3fa6] .el-form-item__label{line-height:130%!important;height:auto!important;justify-content:flex-start!important;width:40vw}.skip[data-v-1b1c3fa6]{width:45vw;margin-top:2vw;padding-top:1vw;padding-bottom:1vw;padding-left:1vw;border:.266667vw solid #dbdbdb;border-radius:1.333333vw;min-width:22.666667vw;background:#fff}.Piping[data-v-1b1c3fa6]{margin-top:2vw;background:#fff;border-radius:1.333333vw}.manifestHeader[data-v-1b1c3fa6]{border-bottom:1px solid #dbdbdb}.rowTitle[data-v-1b1c3fa6]{color:#627b88;padding:0 1vw;margin-top:1vw}p[data-v-54ae01c1]{margin:0}.title[data-v-54ae01c1]{margin:2vw 0;text-align:center;font-weight:700}.formTel[data-v-54ae01c1]{padding:0 2vw}.el-form-item[data-v-54ae01c1]{margin-bottom:1.6vw;align-items:center}[data-v-54ae01c1] .el-form-item__label{line-height:130%!important;height:auto!important;justify-content:flex-start!important;width:40vw}.skip[data-v-54ae01c1]{width:45vw;margin-top:2vw;padding-top:1vw;padding-bottom:1vw;padding-left:1vw;border:.266667vw solid #dbdbdb;border-radius:1.333333vw;min-width:22.666667vw;background:#fff}.Piping[data-v-54ae01c1]{margin-top:2vw;background:#fff;border-radius:1.333333vw}p[data-v-38c5a744]{margin:0}[data-v-38c5a744] .title{margin:2vw 0;text-align:center;font-weight:700}.formTel[data-v-38c5a744]{padding:0 2vw}.el-form-item[data-v-38c5a744]{margin-bottom:1.6vw;align-items:center}[data-v-38c5a744] .el-form-item__label{line-height:130%!important;height:auto!important;justify-content:flex-start!important;width:40vw}.skip[data-v-38c5a744]{width:45vw;margin-top:2vw;padding-top:1vw;padding-bottom:1vw;padding-left:1vw;border:.266667vw solid #dbdbdb;border-radius:1.333333vw;min-width:22.666667vw;background:#fff}.Piping[data-v-38c5a744]{margin-top:2vw;background:#fff;border-radius:1.333333vw}.manifestHeader[data-v-38c5a744]{border-bottom:1px solid #dbdbdb}.rowTitle[data-v-38c5a744]{color:#627b88;padding:0 1vw;margin-top:1vw}.sign-finish{height:100vh;width:100vw}.sign-finish button{height:4.266667vw;padding:0 1.066667vw;font-size:1.6vw;border-radius:.266667vw}.sign-finish .danger{color:#fff;background:#ee0a24;border:1px solid #ee0a24}.sign-finish .warning{color:#fff;background:#ff976a;border:1px solid #ff976a}.sign-finish .primary{color:#fff;background:#1989fa;border:1px solid #1989fa}.sign-finish .success{color:#fff;background:#07c160;border:1px solid #07c160}.sign-finish canvas{border-radius:1.333333vw;border:.266667vw dashed #ccc}.sign-finish .wrap1{height:100%;width:96%;margin:auto;margin-top:13.333333vw}.sign-finish .wrap1 .actions{display:flex;justify-content:space-around}.sign-finish .wrap2{padding:2vw;height:100%;display:flex;justify-content:center}.sign-finish .wrap2 .actionsWrap{width:6.666667vw;display:flex;justify-content:center;align-items:center}.sign-finish .wrap2 .canvas{flex:1}.sign-finish .wrap2 .actions{margin-right:1.333333vw;white-space:nowrap;transform:rotate(90deg)}.sign-finish .wrap2 .actions button{margin-right:2.666667vw}p[data-v-f5f04699]{margin:0}.navbarIcon[data-v-f5f04699]{display:flex;justify-content:flex-end;align-items:center;color:#fff}.navbarIcon img[data-v-f5f04699]{width:3.6vw;height:3.6vw;margin-right:2.666667vw;color:#fff}.navbarIcon .img2[data-v-f5f04699]{width:4.5vw;height:4.5vw}.navbarIcon .img3[data-v-f5f04699]{width:5vw;height:5vw}.title[data-v-f5f04699]{margin:1.5vw 0;text-align:center;font-weight:700}.formTel[data-v-f5f04699]{padding:0 2vw}.el-form-item[data-v-f5f04699]{margin-bottom:1.6vw}[data-v-f5f04699] .el-form-item__label{line-height:130%!important;height:auto!important;justify-content:flex-start!important;width:40vw}.el-tab-pane[data-v-f5f04699]{padding:0px 2vw}.skip[data-v-f5f04699]{width:45vw;margin-top:2vw;padding-top:1vw;padding-bottom:1vw;padding-left:1vw;border:.266667vw solid #dbdbdb;border-radius:1.333333vw;min-width:22.666667vw;background:#fff}.contentBox[data-v-f5f04699]{background:#fbfbfb}.Piping[data-v-f5f04699]{margin-top:2vw;background:#fff;border-radius:1.333333vw}.signatureBox[data-v-f5f04699]{border:1px solid #dbdbdb;margin:0 1vw;border-radius:1.5vw}.signatureBox .box[data-v-f5f04699]{display:flex;padding:2vw;padding-top:0}.signatureBox .box>div[data-v-f5f04699]{flex-basis:50%}.signatureBox .box .info[data-v-f5f04699]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start}.signatureBox .box .info div[data-v-f5f04699]{display:flex;align-items:center}.signatureBox .box .info div p[data-v-f5f04699]{line-height:4vw}.signatureBox .box .signature[data-v-f5f04699]{border:1px solid black;border-radius:.5vw;background-color:#9e9e9e;text-align:center;position:relative;height:15vh}.signatureBox .box .signature p[data-v-f5f04699]{font-size:3.5vw;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.signatureBox .box .signature img[data-v-f5f04699]{width:100%;height:100%}.signatureCss[data-v-f5f04699]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;background:#dbdbdb}.footer[data-v-f5f04699]{display:flex;align-items:center;margin:2vw 1vw 1vw}.footer .van-cell[data-v-f5f04699]{margin-top:0}.he100[data-v-f5f04699]{height:100vh;overflow:hidden}\n/*$vite$:1*/",document.head.appendChild(t);const A={style:{margin:"1vw 0",padding:"0 1vw"}},F={__name:"tepmCheck",props:{value:{type:Object,default:()=>({})}},setup(e){const t=e,a=p({get:()=>t.value||{},set(e){console.log("set",e),emits("update:value",e)}});w((()=>{i({typeCode:"DEFECTS_FLAG"}).then((e=>{e&&(e.data&&0===e.code?l.value=e.data.map((e=>({label:e.valTc,value:e.code}))):l.value=[])})).catch((e=>{n({message:e.msg,type:"fail"})})),i({typeCode:"CHECK_LOCATION_TYPE"}).then((e=>{e&&(e.data&&0===e.code?o.value=e.data.map((e=>({label:e.valTc,value:e.code}))):o.value=[])})).catch((e=>{n({message:e.msg,type:"fail"})}))}));const l=b([]),o=b([]);return(e,t)=>{const i=c,n=v,l=f,o=h;return x(!0),y(E,null,L(a.value,((t,a)=>(x(),y("div",{class:"Piping",key:a},[k("div",null,[k("p",A,S(t.requirements),1),_(o,{model:t,class:"formTel"},{default:B((()=>[_(i,{label:"Point type分数種類：Penalty Point罰分\r\nDefects/irregularities found?發現不合規格/不妥當之\r\n處？:"},{default:B((()=>[T(S(t.defects),1)])),_:2},1024),_(i,{label:"Defects/irregularities不合规格/不妥當之處:"},{default:B((()=>[T(S(t.defectsDetail),1)])),_:2},1024),_(i,{label:"Type類别:"},{default:B((()=>[T(S(t.waterType),1)])),_:2},1024),_(i,{label:"Details of Inspected Location已視察位置的詳情:"},{default:B((()=>[T(S(t.inspectLocation),1)])),_:2},1024),_(i,{label:"Details詳情:"},{default:B((()=>[T(S(t.details),1)])),_:2},1024),_(i,{label:"Remarks備註:"},{default:B((()=>[T(S(t.remarks),1)])),_:2},1024),_(i,{label:"Photo Taken夹附图片:"},{default:B((()=>[_(n,{modelValue:t.potoTaken,"onUpdate:modelValue":e=>t.potoTaken=e,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),t.potoTaken?(x(),D(l,{key:0,disabled:"",modelValue:t.file,"onUpdate:modelValue":e=>t.file=e,"after-read":()=>e.afterRead(e.file,t),"before-delete":(a,i)=>e.deletefile(a,i,t)},null,8,["modelValue","onUpdate:modelValue","after-read","before-delete"])):C("",!0)])),_:2},1032,["model"])])])))),128)}}},M=a(F,[["__scopeId","data-v-886e0c5f"]]),Y={class:"manifestHeader"},H={key:0},O={key:1},X={key:2},q={key:3},V={key:4},G=a({__name:"formOfChecklist",props:{value:{type:Object,default:()=>({})}},setup(e){const t=P();w((()=>{i({typeCode:"INSPECTION_TYPE"}).then((e=>{e&&(e.data&&0===e.code?a.value=e.data.map((e=>({label:e.valTc,value:e.code}))):a.value=[])})).catch((e=>{n({message:e.msg,type:"fail"})})),i({typeCode:"PLUMBING_WORK_TYPE"}).then((e=>{e&&(e.data&&0===e.code?o.value=e.data.map((e=>({label:e.valTc,value:e.code}))):o.value=[])})).catch((e=>{n({message:e.msg,type:"fail"})})),l({formId:t.query.formId,refId:t.query.refId,unPassed:!0}).then((e=>{e&&e.data&&0===e.code&&(d.value=e.data,s.value=e.data.cklstHeader,s.value.premisesAddress="",e.data.cklstHeader?.addrLine1&&(s.value.premisesAddress+="Premises Address line 1\n",s.value.premisesAddress+=e.data.cklstHeader.addrLine1),e.data.cklstHeader.addrLine2&&(s.value.premisesAddress+="Premises Address line 2\n",s.value.premisesAddress+=e.data.cklstHeader.addrLine2),e.data.cklstHeader.addrLine3&&(s.value.premisesAddress+="Premises Address line 3\n",s.value.premisesAddress+=e.data.cklstHeader.addrLine3),e.data.cklstHeader.addrLine4&&(s.value.premisesAddress+="Premises Address line 4\n",s.value.premisesAddress+=e.data.cklstHeader.addrLine4),["cklstBodyAList","cklstBodyBList","cklstBodyCList","cklstBodyDList","cklstBodyEList"].forEach((e=>{d.value[e]&&d.value[e].forEach((e=>{"N"==e.potoTaken?e.potoTaken=!1:"Y"==e.potoTaken&&(e.potoTaken=!0,e.file=[],e.potoIdUrl.forEach((t=>{e.file.push({url:t+=".jpeg"})})))}))})))})).catch((e=>{n({message:e.msg,type:"fail"})}))}));const a=b([]),o=b([]),s=b({}),d=b({});return(e,t)=>{const a=c,i=h;return x(),y(E,null,[k("div",Y,[t[5]||(t[5]=k("p",{class:"title"},"General Information一般資料",-1)),_(i,{model:s.value,class:"formTel"},{default:B((()=>[_(a,{label:"Date of Inspection 視察日期:"},{default:B((()=>[T(S(s.value.inspectDate),1)])),_:1}),_(a,{label:"Premises Address 處所地址:"},{default:B((()=>[T(S(s.value.premisesAddress),1)])),_:1}),_(a,{label:"Name of Licensed Plumber 持牌水喉匠姓名:"},{default:B((()=>[T(S(s.value.lpName),1)])),_:1}),_(a,{label:"Plumber's Licence Number 水喉匠牌照號碼:"},{default:B((()=>[T(S(s.value.lpNo),1)])),_:1}),_(a,{label:"Serial Number of Form WWO46 表格WWO46編號:"},{default:B((()=>[T(S(s.value.refId),1)])),_:1}),_(a,{label:"Inspection Type 視察類別:"},{default:B((()=>[T(S(s.value.inspectType),1)])),_:1}),_(a,{label:"Type of Plumbing Works水管工程類别:"},{default:B((()=>[T(S(s.value.waterPipeType),1)])),_:1}),_(a,{label:"ASN申請書编號:"},{default:B((()=>[T(S(s.value.input),1)])),_:1})])),_:1},8,["model"])]),d.value.cklstBodyAList&&d.value.cklstBodyAList.length>0?(x(),y("div",H,[t[6]||(t[6]=k("p",{class:"rowTitle"}," (A)Piping (including all pipes and fittings,and connection pipe) 喉管（包括所有喉管與装置，以及接駁喉） ",-1)),_(M,{value:d.value.cklstBodyAList,"onUpdate:value":t[0]||(t[0]=e=>d.value.cklstBodyAList=e)},null,8,["value"])])):C("",!0),d.value.cklstBodyBList&&d.value.cklstBodyBList.length>0?(x(),y("div",O,[t[7]||(t[7]=k("p",{class:"rowTitle"},"(B) 表位/检测表位",-1)),_(M,{value:d.value.cklstBodyBList,"onUpdate:value":t[1]||(t[1]=e=>d.value.cklstBodyBList=e)},null,8,["value"])])):C("",!0),d.value.cklstBodyCList&&d.value.cklstBodyCList.length>0?(x(),y("div",X,[t[8]||(t[8]=k("p",{class:"rowTitle"},"(C) 储水缸",-1)),_(M,{value:d.value.cklstBodyCList,"onUpdate:value":t[2]||(t[2]=e=>d.value.cklstBodyCList=e)},null,8,["value"])])):C("",!0),d.value.cklstBodyDList&&d.value.cklstBodyDList.length>0?(x(),y("div",q,[t[9]||(t[9]=k("p",{class:"rowTitle"},"(D) 同位更换水喉",-1)),_(M,{value:d.value.cklstBodyDList,"onUpdate:value":t[3]||(t[3]=e=>d.value.cklstBodyDList=e)},null,8,["value"])])):C("",!0),d.value.cklstBodyEList&&d.value.cklstBodyEList.length>0?(x(),y("div",V,[t[10]||(t[10]=k("p",{class:"rowTitle"},"(E) 其他",-1)),_(M,{value:d.value.cklstBodyEList,"onUpdate:value":t[4]||(t[4]=e=>d.value.cklstBodyEList=e)},null,8,["value"])])):C("",!0)],64)}}},[["__scopeId","data-v-1b1c3fa6"]]),z={style:{margin:"1vw 0",padding:"0 1vw"}},K={__name:"tepmTesRecords",props:{value:{type:Object,default:()=>({})}},setup(e){const t=e,a=p({get:()=>t.value||{},set(e){console.log("set",e),emits("update:value",e)}});return w((()=>{})),(e,t)=>{const i=c,n=h;return x(!0),y(E,null,L(a.value,((e,t)=>(x(),y("div",{class:"Piping",key:t},[k("div",null,[k("p",z,S(e.requirements),1),_(n,{model:e,class:"formTel"},{default:B((()=>[_(i,{label:"Location of Joint:"},{default:B((()=>[T(S(e.joint),1)])),_:2},1024),_(i,{label:"Pass / Fail:"},{default:B((()=>[T(S("Y"==e.isPass?"通过":"未通过"),1)])),_:2},1024),_(i,{label:"Photo Ref:"},{default:B((()=>[T(S(e.photoRef),1)])),_:2},1024)])),_:2},1032,["model"])])])))),128)}}},J=a(K,[["__scopeId","data-v-54ae01c1"]]),Q={class:"manifestHeader"},$={key:0},Z={key:1},ee={key:2},te={key:3},ae={key:4},ie=a({__name:"formOfTesRecords",props:{value:{type:Object,default:()=>({})}},setup(e){const t=P();w((()=>{o({formId:t.query.formId,refId:t.query.refId,unPassed:!0}).then((e=>{e&&e.data&&0===e.code&&(i.value=e.data,a.value=e.data.sdrjtstsHeader)})).catch((e=>{n({message:e.msg,type:"fail"})}))}));const a=b({}),i=b({});return(e,t)=>{const n=c,l=h;return x(),y(E,null,[k("div",Q,[t[5]||(t[5]=k("p",{class:"title"},"Solder Joint Sampling Testing Records",-1)),_(l,{model:a.value,class:"formTel"},{default:B((()=>[_(n,{label:"Name of Building:"},{default:B((()=>[T(S(a.value.buildingName),1)])),_:1}),_(n,{label:"No of Storey:"},{default:B((()=>[T(S(a.value.storey),1)])),_:1}),_(n,{label:"WSD ref:"},{default:B((()=>[T(S(a.value.wsdRef),1)])),_:1}),_(n,{label:"ASN:"},{default:B((()=>[T(S(a.value.asnNo),1)])),_:1}),_(n,{label:"Date:"},{default:B((()=>[T(S(a.value.date),1)])),_:1}),_(n,{label:"Date Remarks 日期備註:"},{default:B((()=>[T(S(a.value.remarks),1)])),_:1})])),_:1},8,["model"])]),i.value.sdrjtstsBodyAList&&i.value.sdrjtstsBodyAList.length>0?(x(),y("div",$,[t[6]||(t[6]=k("p",{class:"rowTitle"}," (A) ",-1)),_(J,{value:i.value.sdrjtstsBodyAList,"onUpdate:value":t[0]||(t[0]=e=>i.value.sdrjtstsBodyAList=e)},null,8,["value"])])):C("",!0),i.value.sdrjtstsBodyBList&&i.value.sdrjtstsBodyBList.length>0?(x(),y("div",Z,[t[7]||(t[7]=k("p",{class:"rowTitle"},"(B) ",-1)),_(J,{value:i.value.sdrjtstsBodyBList,"onUpdate:value":t[1]||(t[1]=e=>i.value.sdrjtstsBodyBList=e)},null,8,["value"])])):C("",!0),i.value.sdrjtstsBodyCList&&i.value.sdrjtstsBodyCList.length>0?(x(),y("div",ee,[t[8]||(t[8]=k("p",{class:"rowTitle"},"(C) ",-1)),_(J,{value:i.value.sdrjtstsBodyCList,"onUpdate:value":t[2]||(t[2]=e=>i.value.sdrjtstsBodyCList=e)},null,8,["value"])])):C("",!0),i.value.sdrjtstsBodyDList&&i.value.sdrjtstsBodyDList.length>0?(x(),y("div",te,[t[9]||(t[9]=k("p",{class:"rowTitle"},"(D) ",-1)),_(J,{value:i.value.sdrjtstsBodyDList,"onUpdate:value":t[3]||(t[3]=e=>i.value.sdrjtstsBodyDList=e)},null,8,["value"])])):C("",!0),i.value.sdrjtstsBodyEList&&i.value.sdrjtstsBodyEList.length>0?(x(),y("div",ae,[t[10]||(t[10]=k("p",{class:"rowTitle"},"(E) ",-1)),_(J,{value:i.value.sdrjtstsBodyEList,"onUpdate:value":t[4]||(t[4]=e=>i.value.sdrjtstsBodyEList=e)},null,8,["value"])])):C("",!0)],64)}}},[["__scopeId","data-v-38c5a744"]]);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function le(e,t,a){return t&&function(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,oe(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t);if("object"!=ne(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ne(t)?t:t+""}var se=/Android|iPhone|iPad|Mobile/i.test(navigator.userAgent),de=function(){function e(t,a){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas={},this.ctx={},this.width=320,this.height=200,this.scale=window.devicePixelRatio||1,this.color="black",this.bgColor="",this.canDraw=!1,this.openSmooth=!0,this.minWidth=2,this.maxWidth=6,this.minSpeed=1.5,this.maxWidthDiffRate=20,this.points=[],this.undoList=[],this.redoList=[],this.onStart=function(){},this.onEnd=function(){},this.addListener=function(){i.removeListener(),i.canvas.style.touchAction="none",se&&("ontouchstart"in window||navigator.maxTouchPoints)?(i.canvas.addEventListener("touchstart",i.onDrawStart,{passive:!1}),i.canvas.addEventListener("touchmove",i.onDrawMove,{passive:!1}),document.addEventListener("touchcancel",i.onDrawEnd,{passive:!1}),document.addEventListener("touchend",i.onDrawEnd,{passive:!1})):(i.canvas.addEventListener("mousedown",i.onDrawStart),i.canvas.addEventListener("mousemove",i.onDrawMove),document.addEventListener("mouseup",i.onDrawEnd))},this.removeListener=function(){i.canvas.style.touchAction="auto",i.canvas.removeEventListener("touchstart",i.onDrawStart),i.canvas.removeEventListener("touchmove",i.onDrawMove),document.removeEventListener("touchend",i.onDrawEnd),document.removeEventListener("touchcancel",i.onDrawEnd),i.canvas.removeEventListener("mousedown",i.onDrawStart),i.canvas.removeEventListener("mousemove",i.onDrawMove),document.removeEventListener("mouseup",i.onDrawEnd)},this.onDrawStart=function(e){e.preventDefault(),i.canDraw=!0,i.initPoint(e),i.onStart&&i.onStart(e)},this.onDrawMove=function(e){if(e.preventDefault(),i.canDraw&&(i.initPoint(e),!(i.points.length<2))){var t=i.points.slice(-1)[0],a=i.points.slice(-2,-1)[0];window.requestAnimationFrame?window.requestAnimationFrame((function(){return i.onDraw(a,t)})):i.onDraw(a,t)}},this.onDraw=function(e,t){i.ctx.strokeStyle=t.color||i.color,i.openSmooth?i.drawSmoothLine(e,t):i.drawNoSmoothLine(e,t)},this.onDrawEnd=function(e){i.canDraw&&(i.undoList.push(i.points),i.redoList=[],i.canDraw=!1,i.points=[],i.onEnd&&i.onEnd(e))},this.getLineWidth=function(e){var t=i.minSpeed>10?10:i.minSpeed<1?1:i.minSpeed,a=(i.maxWidth-i.minWidth)*e/t,n=Math.max(i.maxWidth-a,i.minWidth);return Math.min(n,i.maxWidth)},this.getRadianData=function(e,t,a,i){var n=a-e,l=i-t;if(0===n)return{val:0,pos:-1};if(0===l)return{val:0,pos:1};var o=Math.abs(Math.atan(l/n));return a>e&&i<t||a<e&&i>t?{val:o,pos:1}:{val:o,pos:-1}},this.getRadianPoints=function(e,t,a,i){if(0===e.val)return 1===e.pos?[{x:t,y:a+i},{x:t,y:a-i}]:[{y:a,x:t+i},{y:a,x:t-i}];var n=Math.sin(e.val)*i,l=Math.cos(e.val)*i;return 1===e.pos?[{x:t+n,y:a+l},{x:t-n,y:a-l}]:[{x:t+n,y:a-l},{x:t-n,y:a+l}]},this.initPoint=function(e){var t=Date.now(),a=i.points.slice(-1)[0];if(!a||a.t!==t){var n=i.canvas.getBoundingClientRect(),l=e.touches&&e.touches[0]||e,o=l.clientX-n.left,s=l.clientY-n.top;if(!a||a.x!==o||a.y!==s){var d={x:o,y:s,t:t,color:i.color};if(i.openSmooth&&a){var r=i.points.slice(-2,-1)[0];if(d.distance=Math.sqrt(Math.pow(d.x-a.x,2)+Math.pow(d.y-a.y,2)),d.speed=d.distance/(d.t-a.t||.1),d.lineWidth=i.getLineWidth(d.speed),r&&r.lineWidth&&a.lineWidth){var u=(d.lineWidth-a.lineWidth)/a.lineWidth,c=i.maxWidthDiffRate/100;if(c=c>1?1:c<.01?.01:c,Math.abs(u)>c){var v=u>0?c:-c;d.lineWidth=a.lineWidth*(1+v)}}}i.points.push(d)}}},this.drawSmoothLine=function(e,t){var a=t.x-e.x,n=t.y-e.y;if(Math.abs(a)+Math.abs(n)<=i.scale?(t.lastX1=t.lastX2=e.x+.5*a,t.lastY1=t.lastY2=e.y+.5*n):(t.lastX1=e.x+.3*a,t.lastY1=e.y+.3*n,t.lastX2=e.x+.7*a,t.lastY2=e.y+.7*n),t.perLineWidth=(e.lineWidth+t.lineWidth)/2,"number"==typeof e.lastX1){if(i.drawCurveLine(e.lastX2,e.lastY2,e.x,e.y,t.lastX1,t.lastY1,t.perLineWidth),e.isFirstPoint)return;if(e.lastX1===e.lastX2&&e.lastY1===e.lastY2)return;var l=i.getRadianData(e.lastX1,e.lastY1,e.lastX2,e.lastY2),o=i.getRadianPoints(l,e.lastX1,e.lastY1,e.perLineWidth/2),s=i.getRadianPoints(l,e.lastX2,e.lastY2,t.perLineWidth/2);i.drawTrapezoid(o[0],s[0],s[1],o[1],t.color)}else t.isFirstPoint=!0},this.drawNoSmoothLine=function(e,t){t.lastX=e.x+.5*(t.x-e.x),t.lastY=e.y+.5*(t.y-e.y),"number"==typeof e.lastX&&i.drawCurveLine(e.lastX,e.lastY,e.x,e.y,t.lastX,t.lastY,i.maxWidth)},this.drawCurveLine=function(e,t,a,n,l,o,s){i.ctx.lineWidth=Number(s.toFixed(1)),i.ctx.beginPath(),i.ctx.moveTo(Number(e.toFixed(1)),Number(t.toFixed(1))),i.ctx.quadraticCurveTo(Number(a.toFixed(1)),Number(n.toFixed(1)),Number(l.toFixed(1)),Number(o.toFixed(1))),i.ctx.stroke()},this.drawTrapezoid=function(e,t,a,n,l){i.ctx.beginPath(),i.ctx.moveTo(Number(e.x.toFixed(1)),Number(e.y.toFixed(1))),i.ctx.lineTo(Number(t.x.toFixed(1)),Number(t.y.toFixed(1))),i.ctx.lineTo(Number(a.x.toFixed(1)),Number(a.y.toFixed(1))),i.ctx.lineTo(Number(n.x.toFixed(1)),Number(n.y.toFixed(1))),i.ctx.fillStyle=l||i.color,i.ctx.fill()},this.drawBgColor=function(){i.bgColor&&(i.ctx.fillStyle=i.bgColor,i.ctx.fillRect(0,0,i.width,i.height))},this.drawByImageUrl=function(e){var t=new Image;t.onload=function(){i.ctx.clearRect(0,0,i.width,i.height),i.ctx.drawImage(t,0,0,i.width,i.height)},t.crossOrigin="anonymous",t.src=e},this.clear=function(){i.ctx.clearRect(0,0,i.width,i.height),i.drawBgColor(),i.undoList=[],i.redoList=[]},this.undo=function(){if(i.undoList.length){var e=i.undoList.pop();e&&i.redoList.unshift(e),i.ctx.clearRect(0,0,i.width,i.height),i.drawBgColor(),i.undoList.forEach((function(e){e.forEach((function(t,a){0!==a&&i.onDraw(e[a-1],t)}))}))}},this.redo=function(){if(i.redoList.length){var e=i.redoList.shift();e&&i.undoList.push(e),i.ctx.clearRect(0,0,i.width,i.height),i.drawBgColor(),i.undoList.forEach((function(e){e.forEach((function(t,a){0!==a&&i.onDraw(e[a-1],t)}))}))}},this.toDataURL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(i.canvas.width===i.width)return i.canvas.toDataURL(e,t);var a=document.createElement("canvas");return a.width=i.width,a.height=i.height,a.getContext("2d").drawImage(i.canvas,0,0,a.width,a.height),a.toDataURL(e,t)},this.getPNG=function(){return i.toDataURL()},this.getJPG=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8;return i.toDataURL("image/jpeg",e)},this.isEmpty=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=i.canvas.width,e.height=i.canvas.height,i.bgColor?(t.fillStyle=i.bgColor,t.fillRect(0,0,e.width,e.height)):1!==i.scale&&t.scale(i.scale,i.scale),e.toDataURL()===i.canvas.toDataURL()},this.getRotateCanvas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;e=e>0?e>90?180:90:e<-90?180:-90;var t=document.createElement("canvas"),a=i.width,n=i.height;180===e?(t.width=a,t.height=n):(t.width=n,t.height=a);var l=t.getContext("2d");return l.rotate(e*Math.PI/180),90===e?l.drawImage(i.canvas,0,-n,a,n):-90===e?l.drawImage(i.canvas,-a,0,a,n):180===e&&l.drawImage(i.canvas,-a,-n,a,n),t},this.init(t,a)}return le(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(this.canvas=e,this.ctx=e.getContext("2d"),this.width=t.width||e.clientWidth||this.width,this.height=t.height||e.clientHeight||this.height,this.scale=t.scale||this.scale,this.color=t.color||this.color,this.bgColor=t.bgColor||this.bgColor,this.openSmooth=void 0===t.openSmooth?this.openSmooth:!!t.openSmooth,this.minWidth=t.minWidth||this.minWidth,this.maxWidth=t.maxWidth||this.maxWidth,this.minSpeed=t.minSpeed||this.minSpeed,this.maxWidthDiffRate=t.maxWidthDiffRate||this.maxWidthDiffRate,this.onStart=t.onStart,this.onEnd=t.onEnd,this.scale>0&&(this.canvas.height=this.height*this.scale,this.canvas.width=this.width*this.scale,1!==this.scale&&(this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.ctx.scale(this.scale,this.scale))),this.ctx.lineCap="round",this.drawBgColor(),this.addListener())}}]),e}();const re={class:"sign-finish"},ue={class:"wrap2"},ce={class:"actionsWrap"},ve={class:"actions"},fe={key:0},he={key:1},me={__name:"signature",props:{curShowImgSrc:{type:[String],default:""}},emits:["toggleshowSignature"],setup(e,{emit:t}){const a=t,i=e,n=b(null),l=b(null),o=b(!1);function s(){l.value.clear()}function d(){l.value.undo()}function r(){if(l.value.isEmpty())return void alert("isEmpty");const e=l.value.getRotateCanvas(-90).toDataURL();n.value.toBlob((t=>{const i=new File([t],"signature.png",{type:"image/png",lastModified:Date.now()});console.log("blob",i),a("toggleshowSignature",{pngUrl:e,file:i})}),"image/png",.8)}function u(){o.value=!1,l.value.clear()}function c(){a("toggleshowSignature")}return w((()=>{!function(){const e=n.value,t={width:window.innerWidth-120,height:window.innerHeight-80,minWidth:3,maxWidth:10,openSmooth:!0,bgColor:"#f6f6f6"};l.value=new de(e,t),console.log("mounted",l.value),i.curShowImgSrc&&(l.value.drawByImageUrl(i.curShowImgSrc),setTimeout((()=>{const e=l.value.getRotateCanvas(90);console.log("canvas",e);const t=e.toDataURL();console.log("pngUrl",t),l.value.drawByImageUrl(t),o.value=!0}),20))}()})),(e,t)=>(x(),y("div",re,[k("div",ue,[k("div",ce,[k("div",ve,[o.value?C("",!0):(x(),y("div",fe,[k("button",{class:"danger",onClick:s},"清除"),k("button",{class:"warning",onClick:d},"撤销"),k("button",{class:"success",onClick:r},"保存")])),o.value?(x(),y("div",he,[k("button",{class:"warning",onClick:u},"重签"),k("button",{class:"success",onClick:c},"确认")])):C("",!0)])]),k("canvas",{class:"canvas",ref_key:"canvasRef",ref:n},null,512)])]))}},ge={class:"contentBox"},pe={class:"signatureBox"},we={class:"box"},be={class:"info"},ye={key:0},xe=["src"],Le={class:"signatureBox",style:{"margin-top":"2vh"}},ke={class:"box"},_e={class:"info"},Se={key:0},Be=["src"],De={class:"footer"},Ce={style:{"text-align":"center",padding:"5vw 0px 5vw 0"}};e("default",a({__name:"index",setup(e){const t=b("#1074cc"),a=P(),i=b(null),l=b(""),o=b({send:!1}),c=b({formId:a.query.formId,isCompleted:!0,cklstFooter:{}});W((()=>a),(()=>{switch(console.log("watch",a.query.type),a.query.type){case"AWS_INSP_CKLST":l.value=N(G);break;case"AWS_SDRJT_TST":l.value=N(ie)}}),{immediate:!0,deep:!0});const v=b(!1);b(!1);const f=b(""),h=b("");function p(e){"wSDep"==e?w.value.pngUrl?(f.value=w.value.pngUrl,v.value=!0):(h.value=e,v.value=!0):"lp"==e&&(L.value.pngUrl?(f.value=L.value.pngUrl,v.value=!0):(h.value=e,v.value=!0))}const w=b(""),L=b("");function S(e){v.value=!v.value,"wSDep"==h.value&&e?(w.value=e,A("wSDep",w.value.file)):"lp"==h.value&&e&&(L.value=e,A("lp",L.value.file)),setTimeout((()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),100),f.value=""}function A(e,t){const a=new FormData;console.log("signatureUrlOfWsdObj",w),a.append("file",t),u(a).then((t=>{t&&t.data&&0===t.code&&("wSDep"==e?c.value.cklstFooter.wsdSignId=t.data.fileId:"lp"==e&&(c.value.cklstFooter.lpSignId=t.data.fileId))})).catch((e=>{console.log(e),n({message:e.msg,type:"fail"})}))}function F(){console.log("requestObj",c.value),r(c.value).then((e=>{e&&e.data&&0===e.code&&n({message:e.msg,type:"success"})})).catch((e=>{console.log(e),n({message:e.msg,type:"fail"})}))}return(e,a)=>{const n=s,r=R("P"),u=g,c=d,h=m;return x(),y(E,null,[k("div",{class:U({he100:v.value})},[_(n,{title:"Form Preview",back:!0,bgColor:t.value},null,8,["bgColor"]),k("div",ge,[(x(),D(j,null,[(x(),D(I(l.value),{ref:"currentComponentRef"},null,512))],1024)),k("div",pe,[a[9]||(a[9]=k("p",{class:"title"},"WSD Inspection Staff水務署視察人员",-1)),k("div",we,[k("div",be,[k("div",null,[_(r,null,{default:B((()=>a[3]||(a[3]=[T("Name姓名： ")]))),_:1}),_(r,null,{default:B((()=>a[4]||(a[4]=[T("CHENG Yin King Stella")]))),_:1})]),k("div",null,[_(r,null,{default:B((()=>a[5]||(a[5]=[T("Post职位： ")]))),_:1}),_(r,null,{default:B((()=>a[6]||(a[6]=[T("ACCMC1")]))),_:1})]),k("div",null,[_(r,null,{default:B((()=>a[7]||(a[7]=[T("Date日期： ")]))),_:1}),_(r,null,{default:B((()=>a[8]||(a[8]=[T("2023/08/25")]))),_:1})])]),k("div",{class:"signature",onClick:a[0]||(a[0]=e=>p("wSDep"))},[w.value.pngUrl?C("",!0):(x(),y("p",ye,"Signature簽名")),w.value.pngUrl?(x(),y("img",{key:1,src:w.value.pngUrl,alt:""},null,8,xe)):C("",!0)])])]),k("div",Le,[a[16]||(a[16]=k("p",{class:"title"},"Licensed Plumber持牌水喉匠",-1)),k("div",ke,[k("div",_e,[k("div",null,[_(r,null,{default:B((()=>a[10]||(a[10]=[T("Name姓名： ")]))),_:1}),_(r,null,{default:B((()=>a[11]||(a[11]=[T("CHENG Yin King Stella")]))),_:1})]),k("div",null,[_(r,null,{default:B((()=>a[12]||(a[12]=[T("Plumber's Licence No.水喉匠牌照号码： ")]))),_:1}),_(r,null,{default:B((()=>a[13]||(a[13]=[T("ACCMC1")]))),_:1})]),k("div",null,[_(r,null,{default:B((()=>a[14]||(a[14]=[T("Date日期： ")]))),_:1}),_(r,null,{default:B((()=>a[15]||(a[15]=[T("2023/08/25")]))),_:1})])]),k("div",{class:"signature",onClick:a[1]||(a[1]=e=>p("lp"))},[L.value.pngUrl?C("",!0):(x(),y("p",Se,"Signature簽名")),L.value.pngUrl?(x(),y("img",{key:1,src:L.value.pngUrl,alt:""},null,8,Be)):C("",!0)])])])]),k("div",De,[a[17]||(a[17]=k("div",null,"Send notification email on submission 提交后发送通知电子邮件：",-1)),k("div",null,[_(c,{center:"",title:"star2000_lau@yahoo.com.hk",class:"skip"},{"right-icon":B((()=>[_(u,{modelValue:o.value.send,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.send=e),size:"16px"},null,8,["modelValue"])])),_:1})])]),k("div",Ce,[_(h,{round:"",type:"primary",onClick:F},{default:B((()=>a[18]||(a[18]=[T("Submit Form")]))),_:1})])],2),v.value?(x(),D(me,{key:0,ref_key:"signatureRef",ref:i,class:"signatureCss",onToggleshowSignature:S,curShowImgSrc:f.value},null,8,["curShowImgSrc"])):C("",!0)],64)}}},[["__scopeId","data-v-f5f04699"]]))}}}));
